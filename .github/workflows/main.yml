name: Build and deploy
on:
    push:
      branches:
        - main
jobs:
    build:
      runs-on: ubuntu-latest
      steps:
        - name: Checkout
          uses: actions/checkout@v3
        - name: Typst compile
          run: typst c thesis.typ --pdf-standard a-3b
        - name: Upload artifact
          uses: actions/upload-artifact@v4
          with:
            name: PDF
            path: thesis.pdf
    deploy:
      needs: build
      runs-on: ubuntu-latest
      permissions:
        contents: write
        pages: write
        id-token: write
     # environment:
      #  name: github-pages
       # url: ${{ steps.deployment.outputs.page_url }}
      steps:
        - name: Download artifacts
          uses: actions/download-artifact@v4
          with:
            name: PDF
        - name: Upload artifact
          uses: actions/upload-pages-artifact@v3
          with:
            path: "."
        - name: Deploy to GitHub Pages
          id: deployment
          uses: actions/deploy-pages@v4